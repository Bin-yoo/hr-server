(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d6271bca"],{"0d8f":function(e,t,s){"use strict";var a=s("23c0"),o=s.n(a);o.a},"23c0":function(e,t,s){},"797a":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Tabs",{attrs:{value:"name1"}},[s("TabPane",{attrs:{label:"部门管理",name:"name1"}},[s("dep-mana")],1),s("TabPane",{attrs:{label:"职称管理",name:"name2"}},[s("joblvl-mana")],1),s("TabPane",{attrs:{label:"职位管理",name:"name3"}},[s("pos-mana")],1)],1)},o=[],n=s("a815"),r=s("a5f1"),i=s("e0fc"),l={data:function(){return{}},methods:{},components:{"dep-mana":n["default"],"joblvl-mana":r["default"],"pos-mana":i["default"]}},d=l,p=s("2877"),c=Object(p["a"])(d,a,o,!1,null,null,null);t["default"]=c.exports},8384:function(e,t,s){var a={"./Basic.vue":"797a","./Role.vue":"aa32","./User.vue":"a44e","./basic/DepMana.vue":"a815","./basic/JobLvlMana.vue":"a5f1","./basic/PosMana.vue":"e0fc"};function o(e){var t=n(e);return s(t)}function n(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=n,e.exports=o,o.id="8384"},a44e:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",[a("Col",{attrs:{span:"4"}},[a("Input",{attrs:{placeholder:"输入用户名进行查询",clearable:""},on:{"on-change":e.check},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),a("Col",{attrs:{span:"2"}},[a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.getUserList}},[e._v("查询")])],1),a("Col",{attrs:{span:"2",offset:"16"}},[a("Button",{attrs:{type:"primary",icon:"ios-add"},on:{click:function(t){e.openAddNew=!0}}},[e._v("添加新用户")])],1)],1),a("br"),a("Row",[a("Col",{attrs:{span:"24"}},[a("Table",{attrs:{border:"",columns:e.columns1,data:e.users,loading:e.loading},scopedSlots:e._u([{key:"role",fn:function(t){var s=t.row;t.index;return e._l(s.roles,(function(t){return a("Tag",{key:t.id},[e._v(e._s(t.name))])}))}},{key:"state",fn:function(t){var s=t.row;t.index;return["admin"==s.username?a("div",[a("i-switch",{attrs:{size:"large",disabled:""},on:{"on-change":function(t){return e.changeState(s.id,s.enabled)}},model:{value:s.enabled,callback:function(t){e.$set(s,"enabled",t)},expression:"row.enabled"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("启用")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("禁用")])])],1):a("div",[a("i-switch",{attrs:{size:"large"},on:{"on-change":function(t){return e.changeState(s.id,s.enabled)}},model:{value:s.enabled,callback:function(t){e.$set(s,"enabled",t)},expression:"row.enabled"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("启用")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("禁用")])])],1)]}},{key:"action",fn:function(t){var s=t.row,o=t.index;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",disabled:1===s.id},on:{click:function(t){return e.beforeUpdate(o)}}},[e._v("编辑")]),a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"warning",disabled:1===s.id},on:{click:function(t){return e.beforeResetPsw(o)}}},[e._v("重置密码")]),a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"error",disabled:1===s.id},on:{click:function(t){return e.deleteUser(s.id)}}},[e._v("删除")])]}}])})],1)],1),a("br"),a("Row",[a("Col",[a("Page",{attrs:{total:e.total,"show-sizer":"","show-elevator":"","show-total":""},on:{"on-change":e.pageChange,"on-page-size-change":e.onPageSizeChange}})],1)],1),a("Modal",{attrs:{title:"添加新用户"},on:{"on-visible-change":e.cancel},model:{value:e.openAddNew,callback:function(t){e.openAddNew=t},expression:"openAddNew"}},[a("Row",[a("Col",{attrs:{span:"21"}},[a("Form",{ref:"newUser",attrs:{model:e.user,rules:e.newUserRules,"label-width":80}},[a("FormItem",{attrs:{label:"当前头像:",prop:"userface"}},[""==e.user.userface?a("img",{style:{width:"128px",height:"128px",borderRadius:"50%"},attrs:{src:s("1195")}}):a("img",{style:{width:"128px",height:"128px",borderRadius:"50%"},attrs:{src:e.user.userface}}),a("Upload",{ref:"upload",staticStyle:{width:"128px"},attrs:{name:"picture","show-upload-list":!1,format:["jpg","jpeg","png"],"max-size":2048,"on-success":e.uploadSuccess,multiple:"",type:"drag",action:"http://111.230.141.100:8080/hrserver/system/user/userface"}},[a("Button",{style:{width:"120px",border:"none"},attrs:{icon:"ios-cloud-upload-outline"}},[e._v("上传头像")])],1)],1),a("FormItem",{attrs:{label:"用户名:",prop:"username"}},[a("Input",{attrs:{placeholder:"用户名..."},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),a("FormItem",{attrs:{label:"密码:",prop:"password"}},[a("Input",{attrs:{type:"password",placeholder:"密码..."},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),a("FormItem",{attrs:{label:"个人姓名:",prop:"name"}},[a("Input",{attrs:{placeholder:"个人姓名..."},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1),a("FormItem",{attrs:{label:"手机号:",prop:"phone"}},[a("Input",{attrs:{placeholder:"手机号..."},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1),a("FormItem",{attrs:{label:"联系地址:",prop:"address"}},[a("Input",{attrs:{type:"textarea",placeholder:"地址..."},model:{value:e.user.address,callback:function(t){e.$set(e.user,"address",t)},expression:"user.address"}})],1),a("FormItem",{attrs:{label:"用户角色:",prop:"roles"}},[a("Select",{attrs:{multiple:""},on:{"on-change":e.selectchange},model:{value:e.user.roles,callback:function(t){e.$set(e.user,"roles",t)},expression:"user.roles"}},e._l(e.rolelist,(function(t){return a("Option",{key:t.id,attrs:{value:t.id,disabled:2==t.id}},[e._v(e._s(t.name))])})),1)],1),a("FormItem",{attrs:{label:"备注:",prop:"remark"}},[a("Input",{attrs:{type:"textarea",placeholder:"备注..."},model:{value:e.user.remark,callback:function(t){e.$set(e.user,"remark",t)},expression:"user.remark"}})],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:function(t){e.openAddNew=!1}}},[e._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.addNewUser("newUser")}}},[e._v("保存")])],1),e.spinShow?a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"18"}}),a("div",[e._v("Loading")])],1):e._e()],1),a("Modal",{attrs:{title:"编辑"},on:{"on-visible-change":e.cancel},model:{value:e.openUpdate,callback:function(t){e.openUpdate=t},expression:"openUpdate"}},[a("Row",[a("Col",{attrs:{span:"22"}},[a("Form",{ref:"user",attrs:{model:e.user,rules:e.newUserRules,"label-width":80}},[a("FormItem",{attrs:{label:"当前头像:",prop:"userface"}},[""==e.user.userface||null==e.user.userface?a("img",{style:{width:"128px",height:"128px",borderRadius:"50%"},attrs:{src:s("1195")}}):a("img",{style:{width:"128px",height:"128px",borderRadius:"50%"},attrs:{src:e.user.userface}}),a("Upload",{ref:"upload",staticStyle:{width:"128px"},attrs:{name:"picture","show-upload-list":!1,format:["jpg","jpeg","png"],"max-size":2048,"on-success":e.uploadSuccess,multiple:"",type:"drag",action:"http://111.230.141.100:8080/hrserver/system/user/userface"}},[a("Button",{style:{width:"120px",border:"none"},attrs:{icon:"ios-cloud-upload-outline"}},[e._v("上传头像")])],1)],1),a("FormItem",{attrs:{label:"用户名:",prop:"username"}},[a("Input",{attrs:{disabled:"",placeholder:"用户名..."},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),a("FormItem",{attrs:{label:"个人姓名:",prop:"name"}},[a("Input",{attrs:{placeholder:"个人姓名..."},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1),a("FormItem",{attrs:{label:"手机号:",prop:"phone"}},[a("Input",{attrs:{placeholder:"手机号..."},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1),a("FormItem",{attrs:{label:"联系地址:",prop:"address"}},[a("Input",{attrs:{type:"textarea",placeholder:"联系地址..."},model:{value:e.user.address,callback:function(t){e.$set(e.user,"address",t)},expression:"user.address"}})],1),a("FormItem",{attrs:{label:"用户角色:",prop:"roles"}},[a("Select",{attrs:{multiple:""},on:{"on-change":e.selectchange},model:{value:e.user.roles,callback:function(t){e.$set(e.user,"roles",t)},expression:"user.roles"}},e._l(e.rolelist,(function(t){return a("Option",{key:t.id,attrs:{value:t.id,disabled:2==t.id}},[e._v(e._s(t.name))])})),1)],1),a("FormItem",{attrs:{label:"备注:",prop:"remark"}},[a("Input",{attrs:{type:"textarea",placeholder:"备注..."},model:{value:e.user.remark,callback:function(t){e.$set(e.user,"remark",t)},expression:"user.remark"}})],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:function(t){e.openUpdate=!1}}},[e._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.updateUser("user")}}},[e._v("保存")])],1),e.spinShow?a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"18"}}),a("div",[e._v("Loading")])],1):e._e()],1),a("Modal",{attrs:{title:"重置密码"},on:{"on-visible-change":e.cancel},model:{value:e.openResetPsw,callback:function(t){e.openResetPsw=t},expression:"openResetPsw"}},[a("Row",[a("Col",{attrs:{span:"22"}},[a("Form",{ref:"password",attrs:{model:e.user,rules:e.newUserRules,"label-width":80}},[a("FormItem",{attrs:{label:"用户名:",prop:"username"}},[a("span",[e._v(e._s(e.user.username))])]),a("FormItem",{attrs:{label:"新密码:",prop:"password"}},[a("Input",{attrs:{type:"password",placeholder:"新密码"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),a("FormItem",{attrs:{label:"重复密码:",prop:"strPassword"}},[a("Input",{attrs:{type:"password",placeholder:"重复密码"},model:{value:e.user.strPassword,callback:function(t){e.$set(e.user,"strPassword",t)},expression:"user.strPassword"}})],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:function(t){e.openResetPsw=!1}}},[e._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.resetPsw("password")}}},[e._v("保存")])],1),e.spinShow?a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"18"}}),a("div",[e._v("Loading")])],1):e._e()],1)],1)},o=[],n=(s("ac6a"),s("7f7f"),s("fa7d")),r={data:function(){return{columns1:[{title:"用户名(登录账号)",key:"username"},{title:"个人姓名",key:"name"},{title:"手机号码",key:"phone"},{title:"联系地址",key:"address"},{title:"备注",key:"remark"},{title:"用户角色",slot:"role"},{title:"状态",width:"100",slot:"state"},{title:"操作",slot:"action",width:"250",align:"center"}],users:[],keyword:"",page:1,total:100,limit:10,loading:!1,spinShow:!1,openAddNew:!1,openUpdate:!1,openResetPsw:!1,newUserRules:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"},{pattern:/^[0-9a-zA-Z]+$/,message:"用户名不能包含中文或特殊字符",trigger:"blur"}],phone:[{required:!0,message:"手机号不能为空",trigger:"blur"},{pattern:/^1(3|4|5|7|8)\d{9}$/,message:"手机号格式不正确",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{pattern:/^[0-9a-zA-Z]+$/,message:"密码不能包含中文或特殊字符",trigger:"blur"}],address:[{type:"string",max:50,message:"地址长度不能超过50个字符"}],name:[{required:!0,message:"个人姓名不能为空",trigger:"blur"}],remark:[{type:"string",max:50,message:"备注长度不能超过50个字符"}],strPassword:[{required:!0,validator:this.validExit,trigger:"blur"}]},user:{id:0,name:"",username:"",password:"",strPassword:"",phone:"",address:"",userface:"",remark:"",roles:[2]},rolelist:[]}},mounted:function(){this.getUserList(),this.getRoleList()},watch:{page:"getUserList",limit:"getUserList"},methods:{onPageSizeChange:function(e){this.limit=e},pageChange:function(e){this.page=e},check:function(){Object(n["b"])(this.keyword)||this.getUserList()},getUserList:function(){var e=this;this.loading=!0,this.getRequest("/system/user/userlist",{page:this.page,limit:this.limit,name:this.keyword}).then((function(t){e.loading=!1,e.users=t.data.data.list,e.total=t.data.data.total}))},getRoleList:function(){var e=this;this.loading=!0,this.getRequest("/system/role/roles",{page:0,limit:0}).then((function(t){e.loading=!1,e.rolelist=t.data.data.list}))},addNewUser:function(e){var t=this,s=/[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、\s]/im;this.$refs[e].validate((function(a){s.test(t.user.name)?t.$Message.error("个人姓名存在特殊字符"):a&&(t.spinShow=!0,t.postRequest("/system/user/addUser",{username:t.user.username,password:t.user.password,name:t.user.name,phone:t.user.phone,address:t.user.address,remark:t.user.remark,userface:t.user.userface,rolesKey:t.user.roles}).then((function(s){0==s.data.error&&200==s.data.code?(t.getUserList(),t.$refs[e].resetFields(),t.$Message.success(s.data.data),t.spinShow=!1,t.openAddNew=!1):(t.$Message.error(s.data.message),t.spinShow=!1)})))}))},changeState:function(e,t){var s=this;this.putRequest("/system/user/enabled",{id:e,enabled:t}).then((function(e){0==e.data.error&&200==e.data.code?s.$Message.success("更新状态成功"):s.$Message.error(e.data.message)}))},beforeUpdate:function(e){this.openUpdate=!0,this.user.id=this.users[e].id,this.user.name=this.users[e].name,this.user.username=this.users[e].username,this.user.phone=""+this.users[e].phone,this.user.address=this.users[e].address,this.user.userface=this.users[e].userface,this.user.remark=this.users[e].remark;var t=[];this.users[e].roles.forEach((function(e){t.push(e.id)})),this.user.roles=t},updateUser:function(e){var t=this,s=/[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、\s]/im;this.$refs[e].validate((function(a){s.test(t.user.name)?t.$Message.error("个人姓名存在特殊字符"):a&&(t.spinShow=!0,t.putRequest("/system/user/updateUser",{id:t.user.id,name:t.user.name,phone:t.user.phone,address:t.user.address,remark:t.user.remark,userface:t.user.userface,rolesKey:t.user.roles}).then((function(s){0==s.data.error&&200==s.data.code?(t.getUserList(),t.$refs[e].resetFields(),t.$Message.success(s.data.data),t.spinShow=!1,t.openUpdate=!1):(t.$Message.error(s.data.message),t.spinShow=!1)})))}))},beforeResetPsw:function(e){this.openResetPsw=!0,this.user.id=this.users[e].id,this.user.username=this.users[e].username},resetPsw:function(e){var t=this;this.$refs[e].validate((function(e){e&&(t.spinShow=!0,t.putRequest("/system/user/resetpsw",{id:t.user.id,password:t.user.password}).then((function(e){0==e.data.error&&200==e.data.code?(t.$Message.success(e.data.data),t.spinShow=!1,t.openResetPsw=!1):(t.$Message.error(e.data.message),t.spinShow=!1)})))}))},cancel:function(e){0==e&&(this.$refs["newUser"].resetFields(),this.$refs["user"].resetFields(),this.$refs["password"].resetFields())},selectchange:function(e){-1==e.indexOf(2)&&(this.user.roles.push(2),this.$Message.error("员工为必选基础角色"))},deleteUser:function(e){var t=this;this.$Modal.confirm({title:"你正在进行删除操作",content:"<p>账号删除后将无法恢复!!!!!!</p><p>你确定要删除该账号吗?</p>",onOk:function(){var s=t;t.deleteRequest("/system/user/user/"+e).then((function(e){400!=e.data.code?(t.$Message.success(e.data.data),t.spinShow=!1,s.getUserList()):t.$Message.error(e.data.message)}))}})},validExit:function(e,t,s){return null==t||""==t?s(new Error("不能为空")):t!=this.user.password?s(new Error("两次密码不一致!")):void s()},uploadSuccess:function(e,t){this.user.userface=e.data}}},i=r,l=s("2877"),d=Object(l["a"])(i,a,o,!1,null,null,null);t["default"]=d.exports},a5f1:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Row",[s("Col",{attrs:{span:"4"}},[s("Input",{attrs:{placeholder:"输入职称名进行查询",clearable:""},on:{"on-change":e.check},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),s("Col",{attrs:{span:"2"}},[s("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.getjoblvlList}},[e._v("查询")])],1),s("Col",{attrs:{span:"2",offset:"16"}},[s("Button",{attrs:{type:"primary",icon:"ios-add"},on:{click:function(t){e.openAddNew=!0}}},[e._v("添加新职称")])],1)],1),s("br"),s("Row",[s("Col",{attrs:{span:"24"}},[s("Table",{attrs:{border:"",columns:e.columns1,data:e.joblvls,loading:e.loading},scopedSlots:e._u([{key:"action",fn:function(t){var a=t.row,o=t.index;return[s("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary"},on:{click:function(t){return e.beforeUpdate(o)}}},[e._v("编辑")]),s("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"error"},on:{click:function(t){return e.deleteJobLvl(a.id)}}},[e._v("删除")])]}}])})],1)],1),s("br"),s("Row",[s("Col",[s("Page",{attrs:{total:e.total,"show-sizer":"","show-elevator":"","show-total":""},on:{"on-change":e.pageChange,"on-page-size-change":e.onPageSizeChange}})],1)],1),s("Modal",{attrs:{title:"添加新职称"},on:{"on-visible-change":e.cancel},model:{value:e.openAddNew,callback:function(t){e.openAddNew=t},expression:"openAddNew"}},[s("Row",[s("Col",{attrs:{span:"21"}},[s("Form",{ref:"newJobLvl",attrs:{model:e.newJobLvl,rules:e.newJobLvlRules,"label-width":80}},[s("FormItem",{attrs:{label:"职称名称:",prop:"name"}},[s("Input",{attrs:{placeholder:"请输入职称名称"},model:{value:e.newJobLvl.name,callback:function(t){e.$set(e.newJobLvl,"name",t)},expression:"newJobLvl.name"}})],1),s("FormItem",{attrs:{label:"备注:",prop:"remark"}},[s("Input",{attrs:{type:"textarea",placeholder:"备注"},model:{value:e.newJobLvl.remark,callback:function(t){e.$set(e.newJobLvl,"remark",t)},expression:"newJobLvl.remark"}})],1)],1)],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{on:{click:function(t){e.openAddNew=!1}}},[e._v("取消")]),s("Button",{attrs:{type:"primary"},on:{click:function(t){return e.addNewJobLvl("newJobLvl")}}},[e._v("保存")])],1),e.spinShow?s("Spin",{attrs:{fix:""}},[s("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"18"}}),s("div",[e._v("Loading")])],1):e._e()],1),s("Modal",{attrs:{title:"编辑角色信息"},on:{"on-visible-change":e.cancel},model:{value:e.openUpdate,callback:function(t){e.openUpdate=t},expression:"openUpdate"}},[s("Row",[s("Col",{attrs:{span:"21"}},[s("Form",{ref:"joblvl",attrs:{model:e.joblvl,rules:e.newJobLvlRules,"label-width":80}},[s("FormItem",{attrs:{label:"角色名:",prop:"name"}},[s("Input",{attrs:{placeholder:"请输入角色名"},model:{value:e.joblvl.name,callback:function(t){e.$set(e.joblvl,"name",t)},expression:"joblvl.name"}})],1),s("FormItem",{attrs:{label:"备注:",prop:"remark"}},[s("Input",{attrs:{type:"textarea",placeholder:"备注"},model:{value:e.joblvl.remark,callback:function(t){e.$set(e.joblvl,"remark",t)},expression:"joblvl.remark"}})],1)],1)],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{on:{click:function(t){e.openUpdate=!1}}},[e._v("取消")]),s("Button",{attrs:{type:"primary"},on:{click:function(t){return e.updateJobLvl("joblvl")}}},[e._v("保存")])],1),e.spinShow?s("Spin",{attrs:{fix:""}},[s("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"18"}}),s("div",[e._v("Loading")])],1):e._e()],1)],1)},o=[],n=(s("7f7f"),s("fa7d")),r={data:function(){return{columns1:[{title:"职称名称",key:"name"},{title:"创建时间",key:"createDate"},{title:"备注",key:"remark"},{title:"操作",slot:"action",width:180,align:"center"}],joblvls:[],keyword:"",page:1,total:100,limit:10,loading:!1,spinShow:!1,openAddNew:!1,openUpdate:!1,newJobLvl:{name:"",remark:""},newJobLvlRules:{name:[{required:!0,message:"职称名称不能为空",trigger:"blur"},{max:10,message:"长度不能超过10位"}],remark:[{type:"string",max:50,message:"备注长度不能超过50个字符"}]},joblvl:{id:0,name:"",remark:""}}},mounted:function(){this.getjoblvlList()},watch:{page:"getjoblvlList",limit:"getjoblvlList"},methods:{onPageSizeChange:function(e){this.limit=e},pageChange:function(e){this.page=e},check:function(){Object(n["b"])(this.keyword)||this.getjoblvlList()},getjoblvlList:function(){var e=this;this.loading=!0,this.getRequest("/system/basic/jobLvlList",{page:this.page,limit:this.limit,name:this.keyword}).then((function(t){e.loading=!1,e.joblvls=t.data.data.list,e.total=t.data.data.total}))},addNewJobLvl:function(e){var t=this,s=/[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、\s]/im;this.$refs[e].validate((function(a){s.test(t.newJobLvl.name)?t.$Message.error("职称名称存在特殊字符"):a&&(t.spinShow=!0,t.postRequest("/system/basic/jobLvl",{name:t.newJobLvl.name,remark:t.newJobLvl.remark}).then((function(s){0==s.data.error&&200==s.data.code?(t.getjoblvlList(),t.$refs[e].resetFields(),t.$Message.success(s.data.data),t.spinShow=!1,t.openAddNew=!1):(t.$Message.error(s.data.message),t.spinShow=!1)})))}))},beforeUpdate:function(e){this.openUpdate=!0,this.joblvl.id=this.joblvls[e].id,this.joblvl.name=this.joblvls[e].name,this.joblvl.createDate=this.joblvls[e].createDate,this.joblvl.remark=this.joblvls[e].remark},updateJobLvl:function(e){var t=this,s=/[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、\s]/im;this.$refs[e].validate((function(a){s.test(t.joblvl.name)?t.$Message.error("职称名称存在特殊字符"):a&&(t.spinShow=!0,t.putRequest("/system/basic/jobLvl",{id:t.joblvl.id,name:t.joblvl.name,remark:t.joblvl.remark}).then((function(s){0==s.data.error&&200==s.data.code?(t.getjoblvlList(),t.$refs[e].resetFields(),t.$Message.success(s.data.data),t.spinShow=!1,t.openUpdate=!1):(t.$Message.error(s.data.message),t.spinShow=!1)})))}))},cancel:function(e){0==e&&(this.$refs["joblvl"].resetFields(),this.$refs["newJobLvl"].resetFields())},deleteJobLvl:function(e){var t=this;this.$Modal.confirm({title:"你正在进行删除操作",content:'<p>删除后相关账号的职称将更改为"普通员工"</p><p>你确定要删除该职称吗?</p>',onOk:function(){var s=t;t.deleteRequest("/system/basic/jobLvl/"+e).then((function(e){400!=e.data.code?(t.$Message.success(e.data.data),t.spinShow=!1,s.getjoblvlList()):t.$Message.error(e.data.message)}))}})}}},i=r,l=s("2877"),d=Object(l["a"])(i,a,o,!1,null,null,null);t["default"]=d.exports},a815:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Row",[s("Col",{attrs:{span:"1"}},[s("Button",{attrs:{type:"primary"},on:{click:function(t){e.openAdd=!0}}},[e._v("新增部门")])],1),s("Col",{staticStyle:{marginLeft:"50px"},attrs:{span:"6"}},[s("Input",{attrs:{search:"",placeholder:"搜索部门名称..."},model:{value:e.department.depNum,callback:function(t){e.$set(e.department,"depNum",t)},expression:"department.depNum"}})],1)],1),s("br"),s("Row",[s("Col",{staticStyle:{textAlign:"left"},attrs:{span:"8"}},[s("Tree",{attrs:{data:e.depTree,render:e.renderContent}}),e.spinShow?s("Spin",{attrs:{fix:""}},[s("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"18"}}),s("div",[e._v("Loading")])],1):e._e()],1)],1),s("Modal",{attrs:{title:"新增部门"},on:{"on-visible-change":e.cancel},model:{value:e.openAdd,callback:function(t){e.openAdd=t},expression:"openAdd"}},[s("Row",[s("Col",{attrs:{span:"21"}},[s("Form",{ref:"departments",attrs:{model:e.department,rules:e.newDepRules,"label-width":80}},[s("FormItem",{attrs:{label:"部门名称:",prop:"name"}},[s("Input",{attrs:{placeholder:"请输入角色名"},model:{value:e.department.name,callback:function(t){e.$set(e.department,"name",t)},expression:"department.name"}})],1),s("FormItem",{attrs:{label:"部门编号:",prop:"depNum"}},[s("Input",{attrs:{placeholder:"请输入部门编号"},model:{value:e.department.depNum,callback:function(t){e.$set(e.department,"depNum",t)},expression:"department.depNum"}})],1),s("FormItem",{attrs:{label:"排序编号:",prop:"orderNum"}},[s("Input",{attrs:{placeholder:"请输入排序编号"},model:{value:e.department.orderNum,callback:function(t){e.$set(e.department,"orderNum",t)},expression:"department.orderNum"}})],1),s("FormItem",{attrs:{label:"上级部门:",prop:"parentId"}},[s("treeselect",{attrs:{options:e.depTree,"default-expand-level":1,placeholder:"请选择上级部门..."},on:{select:e.normalizer},model:{value:e.department.parentId,callback:function(t){e.$set(e.department,"parentId",t)},expression:"department.parentId"}})],1)],1)],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{on:{click:function(t){e.openAdd=!1}}},[e._v("取消")]),s("Button",{attrs:{type:"primary"},on:{click:function(t){return e.addDep("departments")}}},[e._v("保存")])],1),e.spinShow?s("Spin",{attrs:{fix:""}},[s("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"18"}}),s("div",[e._v("Loading")])],1):e._e()],1),s("Modal",{attrs:{title:"修改部门"},on:{"on-visible-change":e.cancel},model:{value:e.openUpdate,callback:function(t){e.openUpdate=t},expression:"openUpdate"}},[s("Row",[s("Col",{attrs:{span:"22"}},[s("Form",{ref:"department",attrs:{model:e.department,rules:e.newDepRules,"label-width":80}},[s("FormItem",{attrs:{label:"部门名称",prop:"name"}},[s("Input",{attrs:{placeholder:"请输入角色名"},model:{value:e.department.name,callback:function(t){e.$set(e.department,"name",t)},expression:"department.name"}})],1),s("FormItem",{attrs:{label:"部门编号",prop:"depNum"}},[s("Input",{attrs:{placeholder:"请输入部门编号"},model:{value:e.department.depNum,callback:function(t){e.$set(e.department,"depNum",t)},expression:"department.depNum"}})],1),s("FormItem",{attrs:{label:"排序编号",prop:"orderNum"}},[s("Input",{attrs:{placeholder:"请输入排序编号"},model:{value:e.department.orderNum,callback:function(t){e.$set(e.department,"orderNum",t)},expression:"department.orderNum"}})],1),s("FormItem",{attrs:{label:"上级部门",prop:"parentId"}},[s("treeselect",{attrs:{options:e.depTree,"default-expand-level":1,placeholder:"请选择上级部门..."},model:{value:e.department.parentId,callback:function(t){e.$set(e.department,"parentId",t)},expression:"department.parentId"}})],1)],1)],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{on:{click:function(t){e.openUpdate=!1}}},[e._v("取消")]),s("Button",{attrs:{type:"primary"},on:{click:function(t){return e.updateDep("department")}}},[e._v("保存")])],1),e.spinShow?s("Spin",{attrs:{fix:""}},[s("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"18"}}),s("div",[e._v("Loading")])],1):e._e()],1)],1)},o=[],n=(s("7f7f"),s("ca17")),r=s.n(n),i=(s("542c"),s("fa7d")),l={components:{Treeselect:r.a},data:function(){return{depTree:[],buttonProps:{type:"primary",size:"small"},spinShow:!1,openAdd:!1,openUpdate:!1,transfer:!0,department:{id:null,depNum:null,orderNum:null,name:"",parentId:null},maxlength:10,newDepRules:{name:[{required:!0,message:"部门名称不能为空",trigger:"blur"},{max:10,message:"长度不能超过10位"}],depNum:[{required:!0,message:"部门编号不能为空",trigger:"blur"},{max:10,message:"长度不能超过10位"},{pattern:/^[0-9]*$/,message:"部门编号只能为纯数字"}]}}},mounted:function(){this.getDeps()},watch:{},methods:{getDeps:function(){var e=this;this.spinShow=!0,this.getRequest("/system/basic/department/list").then((function(t){e.spinShow=!1,e.depTree=t.data.data}))},renderContent:function(e,t){var s=this,a=t.root,o=t.node,n=t.data;return e("span",{style:{display:"inline-block",width:"100%"}},[e("span",n.title),e("span",{style:{display:"inline-block",float:"right",marginRight:"32px"}},[e("Icon",{props:Object.assign({},this.buttonProps,{type:"ios-add"}),style:{marginRight:"8px",fontSize:"16px",cursor:"pointer"},on:{click:function(){s.append(n)}}}),e("Icon",{props:Object.assign({},this.buttonProps,{type:"ios-create-outline"}),style:{marginRight:"8px",fontSize:"16px",cursor:"pointer"},on:{click:function(){s.befUpdate(n)}}}),e("Icon",{props:Object.assign({},this.buttonProps,{type:"ios-trash-outline"}),style:{fontSize:"16px",cursor:"pointer"},on:{click:function(){s.remove(a,o,n)}}})])])},append:function(e){this.openAdd=!0,this.department.parentId=e.id},addDep:function(e){var t=this,s=/[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、\s]/im;this.$refs[e].validate((function(a){s.test(t.department.name)?t.$Message.error("部门名称存在特殊字符"):a&&(t.spinShow=!0,t.postRequest("/system/basic/department",{name:t.department.name,depNum:t.department.depNum,orderNum:t.department.orderNum,parentId:t.department.parentId}).then((function(s){400!=s.data.code?(t.$Message.success(s.data.data),t.$refs[e].resetFields(),t.spinShow=!1,t.openAdd=!1,t.getDeps()):(t.$Message.error(s.data.message),t.spinShow=!1)})))}))},befUpdate:function(e){this.openUpdate=!0,this.department.id=e.id,this.department.depNum=""+e.depNum,this.department.orderNum=e.orderNum,console.log(this.department.depNum),this.department.name=e.name,-1===e.parentId?this.department.parentId=null:this.department.parentId=e.parentId},updateDep:function(e){var t=this,s=/[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、\s]/im;this.$refs[e].validate((function(a){s.test(t.department.name)?t.$Message.error("部门名称存在特殊字符"):a&&t.putRequest("/system/basic/department",{id:t.department.id,depNum:t.department.depNum,orderNum:t.department.orderNum,name:t.department.name,parentId:t.department.parentId}).then((function(s){400!=s.data.code?(t.$Message.success(s.data.data),t.$refs[e].resetFields(),t.spinShow=!1,t.openUpdate=!1,t.getDeps()):(t.$Message.error(s.data.message),t.spinShow=!1)}))}))},remove:function(e,t,s){var a=this;Object(i["b"])(t.node.children)?this.$Message.error("此部门还有下属部门,无法删除"):this.$Modal.confirm({title:"你正在进行删除操作",content:"<p>你确定要删除该部门吗?</p>",onOk:function(){var e=a;a.deleteRequest("/system/basic/department/"+t.node.id).then((function(t){400!=t.data.code?(a.$Message.success(t.data.data),a.spinShow=!1,e.getDeps()):a.$Message.error(t.data.message)}))}})},cancel:function(e){0==e&&(this.$refs["departments"].resetFields(),this.$refs["department"].resetFields())},normalizer:function(e,t){console.log("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!"),console.log(e),console.log("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!"),console.log(t)}}},d=l,p=(s("0d8f"),s("2877")),c=Object(p["a"])(d,a,o,!1,null,null,null);t["default"]=c.exports},aa32:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Row",[s("Col",{attrs:{span:"4"}},[s("Input",{attrs:{placeholder:"输入角色名进行查询",clearable:""},on:{"on-change":e.check},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),s("Col",{attrs:{span:"2"}},[s("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.getRoleList}},[e._v("查询")])],1),s("Col",{attrs:{span:"2",offset:"16"}},[s("Button",{attrs:{type:"primary",icon:"ios-add"},on:{click:function(t){e.openAddNew=!0}}},[e._v("添加新角色")])],1)],1),s("br"),s("Row",[s("Col",{attrs:{span:"24"}},[s("Table",{attrs:{border:"",columns:e.columns1,data:e.roles,loading:e.loading},scopedSlots:e._u([{key:"action",fn:function(t){var a=t.row,o=t.index;return[s("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",disabled:2===a.id},on:{click:function(t){return e.beforeUpdate(o)}}},[e._v("编辑信息")]),s("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary"},on:{click:function(t){return e.getMenuTree(a.id)}}},[e._v("编辑权限")]),s("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"error",disabled:2===a.id},on:{click:function(t){return e.deleteRole(a.id)}}},[e._v("删除")])]}}])})],1)],1),s("br"),s("Row",[s("Col",[s("Page",{attrs:{total:e.total,"show-sizer":"","show-elevator":"","show-total":""},on:{"on-change":e.pageChange,"on-page-size-change":e.onPageSizeChange}})],1)],1),s("Modal",{attrs:{title:"添加新角色"},model:{value:e.openAddNew,callback:function(t){e.openAddNew=t},expression:"openAddNew"}},[s("Row",[s("Col",{attrs:{span:"21"}},[s("Form",{ref:"newRole",attrs:{model:e.newRole,rules:e.newRoleRules,"label-width":80}},[s("FormItem",{attrs:{label:"角色名:",prop:"name"}},[s("Input",{attrs:{placeholder:"请输入角色名"},model:{value:e.newRole.name,callback:function(t){e.$set(e.newRole,"name",t)},expression:"newRole.name"}})],1),s("FormItem",{attrs:{label:"备注:",prop:"remark"}},[s("Input",{attrs:{type:"textarea",placeholder:"备注"},model:{value:e.newRole.remark,callback:function(t){e.$set(e.newRole,"remark",t)},expression:"newRole.remark"}})],1)],1)],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{on:{click:function(t){return e.cancel("newRole")}}},[e._v("取消")]),s("Button",{attrs:{type:"primary"},on:{click:function(t){return e.addNewRole("newRole")}}},[e._v("保存")])],1),e.spinShow?s("Spin",{attrs:{fix:""}},[s("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"18"}}),s("div",[e._v("Loading")])],1):e._e()],1),s("Modal",{attrs:{title:"编辑角色信息"},model:{value:e.openUpdate,callback:function(t){e.openUpdate=t},expression:"openUpdate"}},[s("Row",[s("Col",{attrs:{span:"21"}},[s("Form",{ref:"role",attrs:{model:e.role,rules:e.newRoleRules,"label-width":80}},[s("FormItem",{attrs:{label:"角色名:",prop:"name"}},[s("Input",{attrs:{placeholder:"请输入角色名"},model:{value:e.role.name,callback:function(t){e.$set(e.role,"name",t)},expression:"role.name"}})],1),s("FormItem",{attrs:{label:"备注:",prop:"remark"}},[s("Input",{attrs:{type:"textarea",placeholder:"备注"},model:{value:e.role.remark,callback:function(t){e.$set(e.role,"remark",t)},expression:"role.remark"}})],1)],1)],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{on:{click:function(t){return e.cancel("role")}}},[e._v("取消")]),s("Button",{attrs:{type:"primary"},on:{click:function(t){return e.updateRole("role")}}},[e._v("保存")])],1),e.spinShow?s("Spin",{attrs:{fix:""}},[s("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"18"}}),s("div",[e._v("Loading")])],1):e._e()],1),s("Modal",{attrs:{title:"编辑角色权限","footer-hide":"",width:"400"},model:{value:e.openRole,callback:function(t){e.openRole=t},expression:"openRole"}},[s("Tabs",{attrs:{value:"RoleMana"}},[s("TabPane",{attrs:{label:"模块(菜单)访问权限",name:"RoleMana"}},[s("Row",[s("Col",[s("Tree",{ref:"tree",attrs:{data:e.treeData,"show-checkbox":"",multiple:""}})],1)],1),s("br"),s("Row",{attrs:{type:"flex",justify:"center"}},[s("Col",{attrs:{span:"24"}},[s("Button",{attrs:{type:"primary",long:""},on:{click:e.updateTree}},[e._v("保存")])],1)],1)],1),s("TabPane",{attrs:{label:"操作权限",name:"CharacterMana"}},[e._v("滴滴滴\n            ")])],1),e.spinShow?s("Spin",{attrs:{fix:""}},[s("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"18"}}),s("div",[e._v("Loading")])],1):e._e()],1)],1)},o=[],n=(s("ac6a"),s("7f7f"),s("fa7d")),r={data:function(){return{columns1:[{title:"角色名称",key:"name"},{title:"创建时间",key:"createDate"},{title:"备注",key:"remark"},{title:"操作",slot:"action",width:280,align:"center"}],roles:[],keyword:"",page:1,total:100,limit:10,loading:!1,spinShow:!1,openAddNew:!1,openUpdate:!1,openRole:!1,newRole:{name:"",remark:""},newRoleRules:{name:[{required:!0,message:"角色名不能为空",trigger:"blur"},{max:10,message:"长度不能超过10位"}],remark:[{type:"string",max:50,message:"备注长度不能超过50个字符"}]},role:{id:0,name:"",remark:""},treeData:[],treeRid:""}},mounted:function(){this.getRoleList()},watch:{page:"getRoleList",limit:"getRoleList"},methods:{onPageSizeChange:function(e){this.limit=e},pageChange:function(e){this.page=e},check:function(){Object(n["b"])(this.keyword)||this.getRoleList()},getRoleList:function(){var e=this;this.loading=!0,this.getRequest("/system/role/roles",{page:this.page,limit:this.limit,name:this.keyword}).then((function(t){e.loading=!1,e.roles=t.data.data.list,e.total=t.data.data.total}))},addNewRole:function(e){var t=this,s=/[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、\s]/im;this.$refs[e].validate((function(a){s.test(t.newRole.name)?t.$Message.error("角色名称存在特殊字符"):a&&(t.spinShow=!0,t.postRequest("/system/role/addRole",{name:t.newRole.name,remark:t.newRole.remark}).then((function(s){0==s.data.error&&200==s.data.code?(t.getRoleList(),t.$refs[e].resetFields(),t.$Message.success(s.data.data),t.spinShow=!1,t.openAddNew=!1):(t.$Message.error(s.data.message),t.spinShow=!1)})))}))},beforeUpdate:function(e){this.openUpdate=!0,this.role.id=this.roles[e].id,this.role.name=this.roles[e].name,this.role.remark=this.roles[e].remark},updateRole:function(e){var t=this,s=/[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、\s]/im;this.$refs[e].validate((function(a){s.test(t.role.name)?t.$Message.error("角色名称存在特殊字符"):a&&(t.spinShow=!0,t.putRequest("/system/role/updateRole",{id:t.role.id,name:t.role.name,remark:t.role.remark}).then((function(s){0==s.data.error&&200==s.data.code?(t.getRoleList(),t.$refs[e].resetFields(),t.$Message.success(s.data.data),t.spinShow=!1,t.openUpdate=!1):(t.$Message.error(s.data.message),t.spinShow=!1)})))}))},cancel:function(e){this.openAddNew=!1,this.openUpdate=!1,this.openRole=!1,this.$refs[e].resetFields()},deleteRole:function(e){var t=this;this.$Modal.confirm({title:"你正在进行删除操作",content:'<p>删除后相关账号的权限将更改为"普通员工"</p><p>你确定要删除该角色吗?</p>',onOk:function(){var s=t;t.deleteRequest("/system/role/role/"+e).then((function(e){400!=e.data.code?(t.$Message.success(e.data.data),t.spinShow=!1,s.getRoleList()):t.$Message.error(e.data.message)}))}})},getMenuTree:function(e){var t=this;this.openRole=!0,this.getRequest("/system/role/menuTree/"+e).then((function(e){e&&200==e.status&&(t.treeData=e.data.data)})),this.treeRid=e},updateTree:function(){var e=this,t=this.$refs.tree.getCheckedNodes(),s=[];t.forEach((function(e){null==e.children&&s.push(e.id)})),this.putRequest("/system/role/updateMenuTree",{rid:this.treeRid,checkedKeys:s}).then((function(t){e.$Message.success(t.data.data),e.spinShow=!1})).catch((function(t){e.spinShow=!1,e.$Message.error(t)}))}}},i=r,l=s("2877"),d=Object(l["a"])(i,a,o,!1,null,null,null);t["default"]=d.exports},e0fc:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Row",[s("Col",{attrs:{span:"4"}},[s("Input",{attrs:{placeholder:"输入职位名进行查询",clearable:""},on:{"on-change":e.check},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),s("Col",{attrs:{span:"2"}},[s("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.getPositionList}},[e._v("查询")])],1),s("Col",{attrs:{span:"2",offset:"16"}},[s("Button",{attrs:{type:"primary",icon:"ios-add"},on:{click:function(t){e.openAddNew=!0}}},[e._v("添加新职位")])],1)],1),s("br"),s("Row",[s("Col",{attrs:{span:"24"}},[s("Table",{attrs:{border:"",columns:e.columns1,data:e.positionList,loading:e.loading},scopedSlots:e._u([{key:"action",fn:function(t){var a=t.row,o=t.index;return[s("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary"},on:{click:function(t){return e.beforeUpdate(o)}}},[e._v("编辑")]),s("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"error"},on:{click:function(t){return e.deletePosition(a.id)}}},[e._v("删除")])]}}])})],1)],1),s("br"),s("Row",[s("Col",[s("Page",{attrs:{total:e.total,"show-sizer":"","show-elevator":"","show-total":""},on:{"on-change":e.pageChange,"on-page-size-change":e.onPageSizeChange}})],1)],1),s("Modal",{attrs:{title:"添加新职位"},on:{"on-visible-change":e.cancel},model:{value:e.openAddNew,callback:function(t){e.openAddNew=t},expression:"openAddNew"}},[s("Row",[s("Col",{attrs:{span:"21"}},[s("Form",{ref:"newPosition",attrs:{model:e.newPosition,rules:e.newPositionRules,"label-width":80}},[s("FormItem",{attrs:{label:"职位名称:",prop:"name"}},[s("Input",{attrs:{placeholder:"请输入职位名称"},model:{value:e.newPosition.name,callback:function(t){e.$set(e.newPosition,"name",t)},expression:"newPosition.name"}})],1),s("FormItem",{attrs:{label:"备注:",prop:"remark"}},[s("Input",{attrs:{type:"textarea",placeholder:"备注"},model:{value:e.newPosition.remark,callback:function(t){e.$set(e.newPosition,"remark",t)},expression:"newPosition.remark"}})],1)],1)],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{on:{click:function(t){e.openAddNew=!1}}},[e._v("取消")]),s("Button",{attrs:{type:"primary"},on:{click:function(t){return e.addNewPosition("newPosition")}}},[e._v("保存")])],1),e.spinShow?s("Spin",{attrs:{fix:""}},[s("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"18"}}),s("div",[e._v("Loading")])],1):e._e()],1),s("Modal",{attrs:{title:"编辑角色信息"},on:{"on-visible-change":e.cancel},model:{value:e.openUpdate,callback:function(t){e.openUpdate=t},expression:"openUpdate"}},[s("Row",[s("Col",{attrs:{span:"21"}},[s("Form",{ref:"position",attrs:{model:e.position,rules:e.newPositionRules,"label-width":80}},[s("FormItem",{attrs:{label:"角色名:",prop:"name"}},[s("Input",{attrs:{placeholder:"请输入角色名"},model:{value:e.position.name,callback:function(t){e.$set(e.position,"name",t)},expression:"position.name"}})],1),s("FormItem",{attrs:{label:"备注:",prop:"remark"}},[s("Input",{attrs:{type:"textarea",placeholder:"备注"},model:{value:e.position.remark,callback:function(t){e.$set(e.position,"remark",t)},expression:"position.remark"}})],1)],1)],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{on:{click:function(t){e.openUpdate=!1}}},[e._v("取消")]),s("Button",{attrs:{type:"primary"},on:{click:function(t){return e.updatePosition("position")}}},[e._v("保存")])],1),e.spinShow?s("Spin",{attrs:{fix:""}},[s("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"18"}}),s("div",[e._v("Loading")])],1):e._e()],1)],1)},o=[],n=(s("7f7f"),s("fa7d")),r={data:function(){return{columns1:[{title:"职位名称",key:"name"},{title:"创建时间",key:"createDate"},{title:"备注",key:"remark"},{title:"操作",slot:"action",width:180,align:"center"}],positionList:[],keyword:"",page:1,total:100,limit:10,loading:!1,spinShow:!1,openAddNew:!1,openUpdate:!1,newPosition:{name:"",remark:""},newPositionRules:{name:[{required:!0,message:"职位名称不能为空",trigger:"blur"},{max:10,message:"长度不能超过10位"}],remark:[{type:"string",max:50,message:"备注长度不能超过50个字符"}]},position:{id:0,name:"",remark:""}}},mounted:function(){this.getPositionList()},watch:{page:"getPositionList",limit:"getPositionList"},methods:{onPageSizeChange:function(e){this.limit=e},pageChange:function(e){this.page=e},check:function(){Object(n["b"])(this.keyword)||this.getPositionList()},getPositionList:function(){var e=this;this.loading=!0,this.getRequest("/system/basic/positionList",{page:this.page,limit:this.limit,name:this.keyword}).then((function(t){e.loading=!1,e.positionList=t.data.data.list,e.total=t.data.data.total}))},addNewPosition:function(e){var t=this,s=/[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、\s]/im;this.$refs[e].validate((function(a){s.test(t.newPosition.name)?t.$Message.error("职位名称存在特殊字符"):a&&(t.spinShow=!0,t.postRequest("/system/basic/position",{name:t.newPosition.name,remark:t.newPosition.remark}).then((function(s){0==s.data.error&&200==s.data.code?(t.getPositionList(),t.$refs[e].resetFields(),t.$Message.success(s.data.data),t.spinShow=!1,t.openAddNew=!1):(t.$Message.error(s.data.message),t.spinShow=!1)})))}))},beforeUpdate:function(e){this.openUpdate=!0,this.position.id=this.positionList[e].id,this.position.name=this.positionList[e].name,this.position.createDate=this.positionList[e].createDate,this.position.remark=this.positionList[e].remark},updatePosition:function(e){var t=this,s=/[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、\s]/im;this.$refs[e].validate((function(a){s.test(t.position.name)?t.$Message.error("职位名称存在特殊字符"):a&&(t.spinShow=!0,t.putRequest("/system/basic/position",{id:t.position.id,name:t.position.name,remark:t.position.remark}).then((function(s){0==s.data.error&&200==s.data.code?(t.getPositionList(),t.$refs[e].resetFields(),t.$Message.success(s.data.data),t.spinShow=!1,t.openUpdate=!1):(t.$Message.error(s.data.message),t.spinShow=!1)})))}));s=/\s/},cancel:function(e){0==e&&(this.$refs["position"].resetFields(),this.$refs["newPosition"].resetFields())},deletePosition:function(e){var t=this;this.$Modal.confirm({title:"你正在进行删除操作",content:'<p>删除后相关账号的职位将更改为"普通员工"</p><p>你确定要删除该职位吗?</p>',onOk:function(){var s=t;t.deleteRequest("/system/basic/position/"+e).then((function(e){400!=e.data.code?(t.$Message.success(e.data.data),t.spinShow=!1,s.getPositionList()):t.$Message.error(e.data.message)}))}})}}},i=r,l=s("2877"),d=Object(l["a"])(i,a,o,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-d6271bca.b8785e85.js.map