(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12840419"],{1003:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Row",[s("Col",{attrs:{span:"22"}},[s("Row",{attrs:{gutter:6}},[s("Col",{attrs:{span:"3"}},[s("treeselect",{staticClass:"departDown",attrs:{options:e.dropDownList.departmentList,"default-expand-level":1,placeholder:"请选择部门"},model:{value:e.souformItem.departmentId,callback:function(t){e.$set(e.souformItem,"departmentId",t)},expression:"souformItem.departmentId"}})],1),s("Col",{attrs:{span:"2"}},[s("Select",{attrs:{placeholder:"职位",clearable:""},model:{value:e.souformItem.positionId,callback:function(t){e.$set(e.souformItem,"positionId",t)},expression:"souformItem.positionId"}},e._l(e.dropDownList.positionList,(function(t){return s("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1),s("Col",{attrs:{span:"5"}},[s("Input",{attrs:{clearable:"",placeholder:"请输入姓名..."},model:{value:e.souformItem.name,callback:function(t){e.$set(e.souformItem,"name",t)},expression:"souformItem.name"}})],1),s("Col",{attrs:{span:"1"}},[s("Button",{attrs:{icon:"ios-search"},on:{click:e.getRpList}},[e._v("搜索")])],1)],1)],1),s("Col",{attrs:{span:"2"}},[s("Button",{attrs:{type:"primary"},on:{click:function(t){e.addModal=!0}}},[e._v("添加奖惩记录")])],1)],1),s("br"),s("Row",[s("Table",{ref:"selection",attrs:{border:"",columns:e.columns,data:e.rpLists},scopedSlots:e._u([{key:"action",fn:function(t){var a=t.row,r=t.index;return[s("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary"},on:{click:function(t){return e.beforeUpdate(r)}}},[e._v("编辑")]),s("Button",{attrs:{type:"error"},on:{click:function(t){return e.remove(a.id)}}},[e._v("删除")])]}}])})],1),s("Row",{style:{margin:"20px 0 0 0"}},[s("Col",{attrs:{span:"1"}},[s("Button",{attrs:{type:"error"}},[e._v("批量删除")])],1),s("Page",{attrs:{total:e.total,"show-sizer":"","show-elevator":"","show-total":""},on:{"on-change":e.pageChange,"on-page-size-change":e.onPageSizeChange}})],1),s("Modal",{attrs:{title:"添加奖惩记录",width:"30%"},on:{"on-visible-change":e.cancel},model:{value:e.addModal,callback:function(t){e.addModal=t},expression:"addModal"}},[s("Form",{ref:"rpList",attrs:{model:e.rpList,rules:e.rpRules,"label-width":90}},[s("Row",[s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"选择员工：",prop:"eid"}},[s("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary"},on:{click:e.selectEmp}},[e._v("选择")])],1)],1)],1),s("Row",[s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"姓名："}},[e._v("\n                        "+e._s(e.rpList.name)+"\n                    ")])],1),s("Col",{attrs:{span:"6"}},[s("FormItem",{attrs:{label:"工号："}},[e._v("\n                        "+e._s(e.rpList.workId)+"\n                    ")])],1)],1),s("Row",[s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"所属部门："}},[e._v("\n                        "+e._s(e.rpList.departmentName)+"\n                    ")])],1),s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"职位："}},[e._v("\n                        "+e._s(e.rpList.positionName)+"\n                    ")])],1)],1),s("Row",[s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"奖惩类型：",prop:"type"}},[s("RadioGroup",{model:{value:e.rpList.type,callback:function(t){e.$set(e.rpList,"type",t)},expression:"rpList.type"}},[s("Radio",{attrs:{label:"奖励"}},[e._v("奖励")]),s("Radio",{attrs:{label:"惩罚"}},[e._v("惩罚")])],1)],1)],1),s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"奖惩日期：",prop:"date"}},[s("DatePicker",{attrs:{type:"date",placeholder:"选择奖惩日期"},model:{value:e.rpList.date,callback:function(t){e.$set(e.rpList,"date",t)},expression:"rpList.date"}})],1)],1)],1),s("Row",[s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"奖惩分数：",prop:"point"}},[s("Input",{attrs:{placeholder:"请输入..."},model:{value:e.rpList.point,callback:function(t){e.$set(e.rpList,"point",t)},expression:"rpList.point"}})],1)],1),s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"奖惩原因：",prop:"reason"}},[s("Input",{attrs:{placeholder:"请输入..."},model:{value:e.rpList.reason,callback:function(t){e.$set(e.rpList,"reason",t)},expression:"rpList.reason"}})],1)],1)],1),s("Row",[s("Col",{attrs:{span:"24"}},[s("FormItem",{attrs:{label:"备注：",prop:"remark"}},[s("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入..."},model:{value:e.rpList.remark,callback:function(t){e.$set(e.rpList,"remark",t)},expression:"rpList.remark"}})],1)],1)],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{on:{click:function(t){return e.addhandleReset("rpList")}}},[e._v("重置")]),s("Button",{attrs:{type:"primary"},on:{click:function(t){return e.addRp("rpList")}}},[e._v("保存")])],1)],1),s("Modal",{attrs:{title:"选择员工",width:"40%"},model:{value:e.selectEmpModal,callback:function(t){e.selectEmpModal=t},expression:"selectEmpModal"}},[s("Row",{attrs:{gutter:6}},[s("Col",{attrs:{span:"6"}},[s("treeselect",{staticClass:"departDown",attrs:{options:e.dropDownList.departmentList,"default-expand-level":1,placeholder:"请选择部门"},model:{value:e.souformItem2.departmentId,callback:function(t){e.$set(e.souformItem2,"departmentId",t)},expression:"souformItem2.departmentId"}})],1),s("Col",{attrs:{span:"6"}},[s("Select",{attrs:{placeholder:"职位",clearable:""},model:{value:e.souformItem2.positionId,callback:function(t){e.$set(e.souformItem2,"positionId",t)},expression:"souformItem2.positionId"}},e._l(e.dropDownList.positionList,(function(t){return s("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1),s("Col",{attrs:{span:"3"}},[s("Button",{attrs:{icon:"ios-search"},on:{click:e.getEmpLists}},[e._v("搜索")])],1)],1),s("br"),s("Row",[s("Table",{ref:"selection",attrs:{border:"",columns:e.empColumns,data:e.empLists},scopedSlots:e._u([{key:"action",fn:function(t){t.row;var a=t.index;return[s("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary"},on:{click:function(t){return e.selected(a)}}},[e._v("选择")])]}}])})],1),s("br"),s("Row",{attrs:{type:"flex",justify:"center"}},[s("Page",{attrs:{total:e.empTotal,"page-size":e.pageSize,"show-elevator":"","show-total":""},on:{"on-change":e.empPageChange,"on-page-size-change":e.onEmpPageSizeChange}})],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",[e._v("返回")])],1)],1),s("Modal",{attrs:{title:"修改奖惩记录",width:"30%"},on:{"on-visible-change":e.cancel},model:{value:e.updateModal,callback:function(t){e.updateModal=t},expression:"updateModal"}},[s("Form",{ref:"rpList",attrs:{model:e.rpList,rules:e.rpRules,"label-width":90}},[s("Row",[s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"姓名："}},[e._v("\n                        "+e._s(e.rpList.name)+"\n                    ")])],1),s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"工号："}},[e._v("\n                        "+e._s(e.rpList.workId)+"\n                    ")])],1)],1),s("Row",[s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"所属部门："}},[e._v("\n                        "+e._s(e.rpList.departmentName)+"\n                    ")])],1),s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"职位："}},[e._v("\n                        "+e._s(e.rpList.positionName)+"\n                    ")])],1)],1),s("Row",[s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"奖惩类型：",prop:"type"}},[s("RadioGroup",{model:{value:e.rpList.type,callback:function(t){e.$set(e.rpList,"type",t)},expression:"rpList.type"}},[s("Radio",{attrs:{label:"奖励"}},[e._v("奖励")]),s("Radio",{attrs:{label:"惩罚"}},[e._v("惩罚")])],1)],1)],1),s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"奖惩日期：",prop:"date"}},[s("DatePicker",{attrs:{type:"date",placeholder:"选择奖惩日期"},model:{value:e.rpList.date,callback:function(t){e.$set(e.rpList,"date",t)},expression:"rpList.date"}})],1)],1)],1),s("Row",[s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"奖惩分数：",prop:"point"}},[s("Input",{attrs:{placeholder:"请输入..."},model:{value:e.rpList.point,callback:function(t){e.$set(e.rpList,"point",t)},expression:"rpList.point"}})],1)],1),s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"奖惩原因：",prop:"reason"}},[s("Input",{attrs:{placeholder:"请输入..."},model:{value:e.rpList.reason,callback:function(t){e.$set(e.rpList,"reason",t)},expression:"rpList.reason"}})],1)],1)],1),s("Row",[s("Col",{attrs:{span:"24"}},[s("FormItem",{attrs:{label:"备注：",prop:"remark"}},[s("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入..."},model:{value:e.rpList.remark,callback:function(t){e.$set(e.rpList,"remark",t)},expression:"rpList.remark"}})],1)],1)],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{on:{click:function(t){return e.handleReset("rpList")}}},[e._v("重置")]),s("Button",{attrs:{type:"primary"},on:{click:function(t){return e.updateRp("rpList")}}},[e._v("保存")])],1)],1)],1)},r=[],n=(s("7f7f"),s("ca17")),o=s.n(n),i=(s("542c"),{components:{Treeselect:o.a},name:"PerMv",data:function(){return{addModal:!1,selectEmpModal:!1,updateModal:!1,page:1,empPage:1,total:100,empTotal:100,limit:10,empLimit:5,pageSize:5,dropDownList:[],rpList:{id:"",type:"",reason:"",point:null,date:"",remark:"",eid:"",name:"",positionName:"",departmentName:"",workId:""},rpLists:[],empList:{id:"",name:"",workId:"",departmentName:"",positionName:""},empLists:[],souformItem:{departmentId:null,positionId:null,jobLevelId:null,name:""},souformItem2:{departmentId:null,positionId:null,jobLevelId:null,name:""},empColumns:[{title:"姓名",key:"name"},{title:"工号",key:"workId"},{title:"部门",key:"departmentName"},{title:"职位",key:"positionName"},{title:"职称",key:"jobLevelName"},{title:"操作",slot:"action",align:"center"}],columns:[{type:"selection",width:60,align:"center"},{title:"姓名",key:"name",render:function(e,t){return e("span",t.row.employee.name)}},{title:"工号",key:"workId",render:function(e,t){return e("span",t.row.employee.workId)}},{title:"部门",key:"departmentName",render:function(e,t){return e("span",t.row.employee.departmentName)}},{title:"职位",key:"positionName",render:function(e,t){return e("span",t.row.employee.positionName)}},{title:"日期",key:"date"},{title:"奖惩类别",key:"type"},{title:"奖惩原因",key:"reason"},{title:"奖惩分数",key:"point"},{title:"备注",key:"remark"},{title:"操作",slot:"action",width:175,align:"center"}],rpRules:{eid:[{required:!0,message:"请选择员工",trigger:"change"}],type:[{required:!0,message:"类型不能为空",trigger:"change"}],date:[{required:!0,type:"date",message:"奖惩日期不能为空",trigger:"change"}],point:[{required:!0,message:"奖惩分数不能为空",trigger:"blur"}],reason:[{required:!0,message:"奖惩原因不能为空",trigger:"blur"}],remark:[{type:"string",max:50,message:"备注长度不能超过50个字符"}]}}},methods:{onPageSizeChange:function(e){this.limit=e},pageChange:function(e){this.page=e},onEmpPageSizeChange:function(e){this.empLimit=e},empPageChange:function(e){this.empPage=e},getDropDownList:function(){var e=this;this.getRequest("/employee/init").then((function(t){e.dropDownList=t.data.data}))},getRpList:function(){var e=this;this.getRequest("/rp/allRp",{page:this.page,limit:this.limit,departmentId:this.souformItem.departmentId,positionId:this.souformItem.positionId,name:this.souformItem.name}).then((function(t){e.rpLists=t.data.data.list,e.total=t.data.data.total}))},addRp:function(e){var t=this;this.$refs[e].validate((function(s){s&&t.postRequest("/rp/addRp",{date:t.rpList.date,eid:t.rpList.eid,point:t.rpList.point,reason:t.rpList.reason,remark:t.rpList.remark,type:t.rpList.type}).then((function(s){0==s.data.error&&200==s.data.code?(t.getRpList(),t.$Message.success(s.data.data),t.addModal=!1,t.$refs[e].resetFields(),t.rpList.eid="",t.rpList.name="",t.rpList.workId="",t.rpList.departmentName="",t.rpList.positionName=""):t.$Message.error(s.data.message)}))}))},selectEmp:function(){this.selectEmpModal=!0,this.getEmpLists()},getEmpLists:function(){var e=this;this.getRequest("/employee/allEmp",{page:this.empPage,limit:this.empLimit,departmentId:this.souformItem2.departmentId,jobLevelId:this.souformItem2.jobLevelId,positionId:this.souformItem2.positionId,name:this.souformItem2.name}).then((function(t){e.empLists=t.data.data.list,e.empTotal=t.data.data.total}))},selected:function(e){this.rpList.eid=this.empLists[e].id,this.rpList.name=this.empLists[e].name,this.rpList.workId=this.empLists[e].workId,this.rpList.departmentName=this.empLists[e].departmentName,this.rpList.positionName=this.empLists[e].positionName,this.selectEmpModal=!1},beforeUpdate:function(e){this.updateModal=!0,this.rpList.id=this.rpLists[e].id,this.rpList.type=this.rpLists[e].type,this.rpList.reason=this.rpLists[e].reason,this.rpList.point=""+this.rpLists[e].point,this.rpList.date=this.rpLists[e].date,this.rpList.remark=this.rpLists[e].remark,this.rpList.eid=this.rpLists[e].eid,this.rpList.name=this.rpLists[e].employee.name,this.rpList.positionName=this.rpLists[e].employee.positionName,this.rpList.departmentName=this.rpLists[e].employee.departmentName,this.rpList.workId=this.rpLists[e].employee.workId},updateRp:function(e){var t=this;this.$refs[e].validate((function(s){s&&t.putRequest("/rp/updateRp",{id:t.rpList.id,type:t.rpList.type,reason:t.rpList.reason,point:t.rpList.point,date:t.rpList.date,remark:t.rpList.remark}).then((function(s){400!=s.data.code?(t.$Message.success(s.data.data),t.updateModal=!1,t.getRpList(),t.$refs[e].resetFields()):t.$Message.error(s.data.message)}))}))},remove:function(e){var t=this;this.$Modal.confirm({title:"你正在进行删除操作",content:"<p>你确定要删除该奖惩记录吗?</p>",onOk:function(){var s=t;t.deleteRequest("/rp/deleteRp/"+e).then((function(e){400!=e.data.code?(t.$Message.success(e.data.data),t.spinShow=!1,s.getRpList()):t.$Message.error(e.data.message)}))}})},addhandleReset:function(e){this.rpList.eid="",this.rpList.name="",this.rpList.workId="",this.rpList.departmentName="",this.rpList.positionName="",this.$refs[e].resetFields()},handleReset:function(e){this.$refs[e].resetFields()},cancel:function(e){0==e&&(this.$refs["rpList"].resetFields(),this.rpList.eid="",this.rpList.name="",this.rpList.workId="",this.rpList.departmentName="",this.rpList.positionName="")}},mounted:function(){this.getDropDownList(),this.getRpList()},watch:{page:"getRpList",limit:"getRpList",empPage:"getEmpLists",empLimit:"getEmpLists"}}),l=i,m=s("2877"),d=Object(m["a"])(l,a,r,!1,null,null,null);t["default"]=d.exports},"1eef":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Row",[s("Col",{attrs:{span:"22"}},[s("Row",{attrs:{gutter:6}},[s("Col",{attrs:{span:"3"}},[s("treeselect",{staticClass:"departDown",attrs:{options:e.dropDownList.departmentList,"default-expand-level":1,placeholder:"请选择部门"},model:{value:e.souFormItem.departmentId,callback:function(t){e.$set(e.souFormItem,"departmentId",t)},expression:"souFormItem.departmentId"}})],1),s("Col",{attrs:{span:"2"}},[s("Select",{attrs:{placeholder:"考核状态",clearable:""},model:{value:e.souFormItem.state,callback:function(t){e.$set(e.souFormItem,"state",t)},expression:"souFormItem.state"}},[s("Option",{attrs:{value:"未开始"}},[e._v("未开始")]),s("Option",{attrs:{value:"已开始"}},[e._v("已开始")]),s("Option",{attrs:{value:"已结束"}},[e._v("已结束")])],1)],1),s("Col",{attrs:{span:"5"}},[s("Input",{attrs:{clearable:"",placeholder:"请输入考核名称"},model:{value:e.souFormItem.name,callback:function(t){e.$set(e.souFormItem,"name",t)},expression:"souFormItem.name"}})],1),s("Col",{attrs:{span:"1"}},[s("Button",{attrs:{icon:"ios-search"},on:{click:e.getAssessment}},[e._v("搜索")])],1)],1)],1),s("Col",{attrs:{span:"2"}},[s("Button",{attrs:{type:"primary"},on:{click:function(t){e.addModal=!0}}},[e._v("添加考核")])],1)],1),s("br"),s("Row",[s("Table",{ref:"selection",attrs:{border:"",columns:e.columns,data:e.assessments},scopedSlots:e._u([{key:"action",fn:function(t){var a=t.row,r=t.index;return["未开始"==a.state?s("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary"},on:{click:function(t){return e.startASS(a.id,r)}}},[e._v("开始考核")]):"已开始"==a.state?s("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary"},on:{click:function(t){return e.overAss(a.id,r)}}},[e._v("结束考核")]):s("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",disabled:""}},[e._v("考核结束")]),s("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary"},on:{click:function(t){return e.examine(r)}}},[e._v("审核")]),s("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary"},on:{click:function(t){return e.beforeUpdate(r)}}},[e._v("编辑")]),s("Button",{attrs:{type:"error"},on:{click:function(t){return e.remove(a.id)}}},[e._v("删除")])]}}])})],1),s("Row",{style:{margin:"20px 0 0 0"}},[s("Page",{attrs:{total:e.total,"show-sizer":"","show-elevator":"","show-total":""},on:{"on-change":e.pageChange,"on-page-size-change":e.onPageSizeChange}})],1),s("Modal",{attrs:{title:"添加考核项目",width:"30%"},on:{"on-visible-change":e.cancel},model:{value:e.addModal,callback:function(t){e.addModal=t},expression:"addModal"}},[s("Form",{ref:"newAssessment",attrs:{model:e.newAssessment,rules:e.rules,"label-width":100}},[s("Row",[s("FormItem",{attrs:{label:"考核名称",prop:"name"}},[s("Input",{attrs:{placeholder:"请输入"},model:{value:e.newAssessment.name,callback:function(t){e.$set(e.newAssessment,"name",t)},expression:"newAssessment.name"}})],1)],1),s("Row",[s("FormItem",{attrs:{label:"考核部门",prop:"departmentId"}},[s("treeselect",{staticClass:"departDown",attrs:{options:e.dropDownList.departmentList,"default-expand-level":1,placeholder:"请选择部门"},model:{value:e.newAssessment.departmentId,callback:function(t){e.$set(e.newAssessment,"departmentId",t)},expression:"newAssessment.departmentId"}})],1)],1),s("Row",[s("FormItem",{attrs:{label:"备注",prop:"remark"}},[s("Input",{attrs:{type:"textarea",placeholder:"备注"},model:{value:e.newAssessment.remark,callback:function(t){e.$set(e.newAssessment,"remark",t)},expression:"newAssessment.remark"}})],1)],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{on:{click:function(t){return e.handleReset("newAssessment")}}},[e._v("重置")]),s("Button",{attrs:{type:"primary"},on:{click:function(t){return e.addAssessment("newAssessment")}}},[e._v("保存")])],1)],1),s("Modal",{attrs:{title:"修改考核项目",width:"30%"},on:{"on-visible-change":e.cancel},model:{value:e.updateModal,callback:function(t){e.updateModal=t},expression:"updateModal"}},[s("Form",{ref:"assessment",attrs:{model:e.assessment,rules:e.rules,"label-width":100}},[s("Row",[s("FormItem",{attrs:{label:"考核名称",prop:"name"}},[s("Input",{attrs:{placeholder:"请输入"},model:{value:e.assessment.name,callback:function(t){e.$set(e.assessment,"name",t)},expression:"assessment.name"}})],1)],1),s("Row",[s("FormItem",{attrs:{label:"备注",prop:"remark"}},[s("Input",{attrs:{type:"textarea",placeholder:"备注"},model:{value:e.assessment.remark,callback:function(t){e.$set(e.assessment,"remark",t)},expression:"assessment.remark"}})],1)],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{on:{click:function(t){return e.handleReset("assessment")}}},[e._v("重置")]),s("Button",{attrs:{type:"primary"},on:{click:function(t){return e.update("assessment")}}},[e._v("保存")])],1)],1),s("Modal",{attrs:{title:"审核列表",width:"60%"},on:{"on-visible-change":e.cancel},model:{value:e.examineModal,callback:function(t){e.examineModal=t},expression:"examineModal"}},[s("Row",{attrs:{gutter:6}},[s("Col",{attrs:{span:"5"}},[s("Input",{attrs:{clearable:"",placeholder:"请输入考核名称"},model:{value:e.souExamineName,callback:function(t){e.souExamineName=t},expression:"souExamineName"}})],1),s("Col",{attrs:{span:"1"}},[s("Button",{attrs:{icon:"ios-search"},on:{click:e.examine}},[e._v("搜索")])],1)],1),s("br"),s("Table",{ref:"selection",attrs:{border:"",columns:e.examineColumns,data:e.examineLists},scopedSlots:e._u([{key:"action",fn:function(t){var a=t.row,r=t.index;return["有提交"==a.commit?s("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary"},on:{click:function(t){return e.beforeExamine(r)}}},[e._v("审核")]):s("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",disabled:""}},[e._v("未提交")])]}}])}),s("br"),s("Row",{attrs:{type:"flex",justify:"center"}},[s("Page",{attrs:{total:e.examineTotal,"page-size":e.examinePageSize,"show-elevator":"","show-total":""},on:{"on-change":e.examinePageChange}})],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{on:{click:function(t){e.examineModal=e.flase}}},[e._v("返回")])],1)],1),s("Modal",{attrs:{title:"审核考核"},on:{"on-visible-change":e.cancel},model:{value:e.examineingModal,callback:function(t){e.examineingModal=t},expression:"examineingModal"}},[s("Form",{ref:"beforeExamineAss",attrs:{"label-width":100,model:e.beforeExamineAss,rules:e.examineRules}},[s("Row",[s("FormItem",{attrs:{label:"考核附件："}},[s("a",{attrs:{href:e.beforeExamineAss.data,target:"_blank",download:""}},[e._v(e._s(e._f("formatData")(e.beforeExamineAss.data)))])])],1),s("Row",[s("FormItem",{attrs:{label:"提交说明："}},[e._v("\n                    "+e._s(e.beforeExamineAss.remark)+"\n                ")])],1),s("Row",[s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"考核结果：",prop:"result"}},[s("Select",{attrs:{clearable:""},model:{value:e.beforeExamineAss.result,callback:function(t){e.$set(e.beforeExamineAss,"result",t)},expression:"beforeExamineAss.result"}},[s("Option",{attrs:{value:"未通过"}},[e._v("未通过")]),s("Option",{attrs:{value:"通过"}},[e._v("已通过")]),s("Option",{attrs:{value:"打回修改"}},[e._v("打回修改")])],1)],1)],1)],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"primary"},on:{click:function(t){return e.updateExamineAss("beforeExamineAss")}}},[e._v("提交审核")])],1)],1)],1)},r=[],n=(s("7f7f"),s("ca17")),o=s.n(n),i=(s("542c"),s("c1df")),l=s.n(i),m={components:{Treeselect:o.a},data:function(){return{addModal:!1,updateModal:!1,examineModal:!1,examineingModal:!1,page:1,total:100,limit:10,examinePage:1,examineTotal:100,examineLimit:5,examinePageSize:5,aid:"",createDate:l()().locale("zh-cn").format("YYYY-MM-DD HH:mm:ss"),beginDate:l()().locale("zh-cn").format("YYYY-MM-DD HH:mm:ss"),endDate:l()().locale("zh-cn").format("YYYY-MM-DD HH:mm:ss"),newAssessment:{name:"",departmentId:null,state:"未开始",remarks:""},assessment:{id:"",name:"",state:"",createDate:"",beginDate:"",endDate:"",remarks:""},dropDownList:[],examineLists:[],souExamineName:"",examineAss:{},beforeExamineAss:{id:"",data:"",remark:"",result:""},assessments:[],rules:{name:[{required:!0,message:"姓名不能为空",trigger:"blur"}],departmentId:[{required:!0,type:"number",message:"考核部门不能为空",trigger:"change"}],remark:[{type:"string",max:50,message:"备注长度不能超过50个字符"}]},examineRules:{result:[{required:!0,message:"考核结果不能为空",trigger:"change"}]},souFormItem:{departmentId:null,state:"",name:""},columns:[{title:"考核编号",key:"id"},{title:"考核名称",key:"name"},{title:"考核部门",key:"departmentName"},{title:"状态",key:"state"},{title:"创建时间",key:"createDate"},{title:"开始时间",key:"beginDate"},{title:"结束时间",key:"endDate"},{title:"备注",key:"remarks"},{title:"操作",slot:"action",width:300,align:"center"}],examineColumns:[{title:"姓名",key:"name"},{title:"部门",key:"departmentName"},{title:"职位",key:"positionName"},{title:"是否提交",key:"commit"},{title:"操作",slot:"action",width:110,align:"center"}]}},methods:{onPageSizeChange:function(e){this.limit=e},pageChange:function(e){this.page=e},onExaminePageSizeChange:function(e){this.examineLimit=e},examinePageChange:function(e){this.examinePage=e},addAssessment:function(e){var t=this,s=/[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、\s]/im;this.$refs[e].validate((function(e){s.test(t.newAssessment.name)?t.$Message.error("考核名称存在特殊字符"):e&&t.postRequest("/assessment/addAssesment",{name:t.newAssessment.name,did:t.newAssessment.departmentId,createDate:t.createDate,state:t.newAssessment.state,remark:t.newAssessment.remark}).then((function(e){0==e.data.error&&200==e.data.code?(t.newAssessment.name="",t.newAssessment.remark="",t.$Message.success(e.data.data),t.addModal=!1,t.getAssessment()):t.$Message.error(e.data.message)}))}))},getDropDownList:function(){var e=this;this.getRequest("/employee/init").then((function(t){e.dropDownList=t.data.data}))},getAssessment:function(){var e=this;this.getRequest("/assessment/allAssesment",{page:this.page,limit:this.limit,did:this.souFormItem.departmentId,state:this.souFormItem.state,name:this.souFormItem.name}).then((function(t){e.assessments=t.data.data.list,e.total=t.data.data.total}))},examine:function(e){var t=this;this.examineModal=!0,null!=this.aid&&""!=this.aid||(this.aid=this.assessments[e].id),this.getRequest("/assessment/"+this.aid+"/empAssessment",{page:this.examinePage,limit:this.examineLimit,name:this.souExamineName}).then((function(e){t.examineLists=e.data.data.list,t.examineTotal=e.data.data.total}))},beforeExamine:function(e){var t=this;this.examineingModal=!0,this.getRequest("/assessment/empAssessment/"+this.examineLists[e].eaid).then((function(e){console.log(e),t.examineAss=e.data.data,t.beforeExamineAss.id=t.examineAss.id,t.beforeExamineAss.data=t.examineAss.data,t.beforeExamineAss.remark=t.examineAss.remark,t.beforeExamineAss.result=t.examineAss.result}))},updateExamineAss:function(e){var t=this;this.$refs[e].validate((function(s){s&&t.postRequest("/empAssessment/updateEmployeeAssessment",{id:t.beforeExamineAss.id,result:t.beforeExamineAss.result,check:!0}).then((function(s){0==s.data.error&&200==s.data.code?(t.getAssessment(),t.$Message.success(s.data.data),t.examineingModal=!1,t.$refs[e].resetFields()):t.$Message.error(s.data.message)}))}))},startASS:function(e,t){var s=this;this.$Modal.confirm({title:"开始考核",content:"<p>你确定要开始该考核吗?</p>",onOk:function(){var a=s;s.putRequest("/assessment/updateAssesmentState",{id:e,name:s.assessments[t].name,state:"已开始",beginDate:s.beginDate}).then((function(e){400!=e.data.code?(s.$Message.success(e.data.data),a.getAssessment()):s.$Message.error(e.data.message)}))}})},overAss:function(e,t){var s=this;this.$Modal.confirm({title:"结束考核",content:"<p>你确定要结束该考核吗?</p>",onOk:function(){var a=s;s.putRequest("/assessment/updateAssesmentState",{id:e,name:s.assessments[t].name,state:"已结束",endDate:s.endDate}).then((function(e){400!=e.data.code?(s.$Message.success(e.data.data),a.getAssessment()):s.$Message.error(e.data.message)}))}})},remove:function(e){var t=this;this.$Modal.confirm({title:"你正在进行删除操作",content:"<p>你确定要删除该考核吗?</p>",onOk:function(){var s=t;t.deleteRequest("/assessment/deleteAssesment/"+e).then((function(e){400!=e.data.code?(t.$Message.success(e.data.data),t.spinShow=!1,s.getAssessment()):t.$Message.error(e.data.message)}))}})},beforeUpdate:function(e){this.updateModal=!0,this.assessment.id=this.assessments[e].id,this.assessment.name=this.assessments[e].name,this.assessment.remarks=this.assessments[e].remarks},update:function(e){var t=this,s=/[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、\s]/im;this.$refs[e].validate((function(a){s.test(t.newAssessment.name)?t.$Message.error("考核名称存在特殊字符"):a?t.putRequest("/assessment/updateAssesment",{id:t.assessment.id,name:t.assessment.name,remarks:t.assessment.remarks}).then((function(s){400!=s.data.code?(t.$Message.success(s.data.data),t.updateModal=!1,t.getAssessment(),t.$refs[e].resetFields()):t.$Message.error(s.data.message)})):t.$Message.error("考核名称不能为空")}))},cancel:function(e){0==e&&(this.$refs["newAssessment"].resetFields(),this.$refs["assessment"].resetFields(),this.$refs["beforeExamineAss"].resetFields())},handleReset:function(e){this.$refs[e].resetFields()}},mounted:function(){this.getDropDownList(),this.getAssessment()},watch:{page:"getAssessment",examinePage:"examine",limit:"getAssessment"},filters:{formatData:function(e){var t=function(e,t,s){for(var a=e.indexOf(t),r=0;r<s;r++)a=e.indexOf(t,a+1);return a};if(""!=e&&null!=e){var s=t(e,"/",4),a=e.substring(s+1);return a}return""}}},d=m,p=s("2877"),c=Object(p["a"])(d,a,r,!1,null,null,null);t["default"]=c.exports},"316c":function(e,t,s){var a={"./Assessment.vue":"1eef","./MyAssessment.vue":"df67","./Rp.vue":"1003","./Salary.vue":"f796"};function r(e){var t=n(e);return s(t)}function n(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=n,e.exports=r,r.id="316c"},df67:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Row",[s("Col",{attrs:{span:"22"}},[s("Row",{attrs:{gutter:6}},[s("Col",{attrs:{span:"2"}},[s("Select",{attrs:{placeholder:"考核状态",clearable:""},model:{value:e.souFormItem.state,callback:function(t){e.$set(e.souFormItem,"state",t)},expression:"souFormItem.state"}},[s("Option",{attrs:{value:"已开始"}},[e._v("已开始")]),s("Option",{attrs:{value:"已结束"}},[e._v("已结束")])],1)],1),s("Col",{attrs:{span:"3"}},[s("Input",{attrs:{clearable:"",placeholder:"请输入考核名称"},model:{value:e.souFormItem.name,callback:function(t){e.$set(e.souFormItem,"name",t)},expression:"souFormItem.name"}})],1),s("Col",{attrs:{span:"1"}},[s("Button",{attrs:{icon:"ios-search"},on:{click:e.getDepartAss}},[e._v("搜索")])],1)],1)],1)],1),s("br"),s("Row",[s("Table",{ref:"selection",attrs:{border:"",columns:e.departAssColumns,data:e.departAssLists},scopedSlots:e._u([{key:"commit",fn:function(t){var a=t.row;t.index;return[a.commit?s("p",[e._v("已提交")]):s("p",[e._v("未提交")])]}},{key:"action",fn:function(t){var a=t.row,r=t.index;return[a.commit&&"已开始"==a.state?s("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary"},on:{click:function(t){return e.beforeMyAss(r)}}},[e._v("编辑")]):a.commit&&"已结束"==a.state?s("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary"},on:{click:function(t){return e.getMyAss(r)}}},[e._v("查看")]):"已结束"==a.state?s("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",disabled:""}},[e._v("未考核")]):"已开始"==a.state?s("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary"},on:{click:function(t){return e.addAss(r)}}},[e._v("提交")]):e._e()]}}])}),s("Row",{style:{margin:"10px 0 0 0"},attrs:{type:"flex",justify:"center"}},[s("Page",{attrs:{total:e.departAssTotal,"page-size":e.departAssPageSize,"show-elevator":"","show-total":""},on:{"on-change":e.departAssPageChange}})],1)],1),s("Modal",{attrs:{title:"提交考核"},on:{"on-visible-change":e.cancel},model:{value:e.addModal,callback:function(t){e.addModal=t},expression:"addModal"}},[s("Row",[s("Col",{attrs:{span:"22"}},[s("Form",{ref:"myAssessmentList",attrs:{model:e.myAssessmentList,rules:e.rules,"label-width":100}},[s("FormItem",{attrs:{label:"考核项目:",prop:"name"}},[e._v("\n                        "+e._s(e.myAssessmentList.name)+"\n                    ")]),s("FormItem",{attrs:{label:"附件:",prop:"data"}},[s("Upload",{ref:"upload",attrs:{headers:e.headers,"on-success":e.uploadSuccess,name:"picture",action:"http://localhost:8080/hrserver/empAssessment/data"}},[s("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[e._v("上传文件")])],1)],1),s("FormItem",{attrs:{label:"说明:",prop:"remark"}},[s("Input",{attrs:{type:"textarea",placeholder:"请输入考核说明"},model:{value:e.myAssessmentList.remark,callback:function(t){e.$set(e.myAssessmentList,"remark",t)},expression:"myAssessmentList.remark"}})],1)],1)],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{on:{click:function(t){return e.handleReset("myAssessmentList")}}},[e._v("重置")]),s("Button",{attrs:{type:"primary"},on:{click:function(t){return e.addMyAss("myAssessmentList")}}},[e._v("保存")])],1)],1),s("Modal",{attrs:{title:"查看我的考核",width:"40%"},model:{value:e.showMyAssModal,callback:function(t){e.showMyAssModal=t},expression:"showMyAssModal"}},[s("Form",{ref:"showMyAss",attrs:{model:e.showMyAss,"label-width":100}},[s("FormItem",{attrs:{label:"考核项目:"}},[e._v("\n                "+e._s(e.showMyAss.name)+"\n            ")]),s("FormItem",{attrs:{label:"附件:"}},[e._v("\n                "+e._s(e.showMyAss.data)+"\n            ")]),s("FormItem",{attrs:{label:"说明:"}},[e._v("\n                "+e._s(e.showMyAss.remark)+"\n            ")]),s("FormItem",{attrs:{label:"是否查阅:"}},[e._v("\n                "+e._s(e.showMyAss.check)+"\n            ")]),s("FormItem",{attrs:{label:"审核结果:"}},[e._v("\n                "+e._s(e.showMyAss.result)+"\n            ")])],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{on:{click:function(t){e.selectAssModal=!1}}},[e._v("返回")])],1)],1),s("Modal",{attrs:{title:"编辑我的考核"},model:{value:e.updateMyAssModal,callback:function(t){e.updateMyAssModal=t},expression:"updateMyAssModal"}},[s("Form",{ref:"updateMyAss",attrs:{model:e.updateMyAss,"label-width":100,rules:e.rules}},[s("FormItem",{attrs:{label:"考核项目:"}},[e._v("\n                "+e._s(e.updateMyAss.name)+"\n            ")]),s("FormItem",{attrs:{label:"附件:"}},[s("a",{attrs:{href:e.updateMyAss.data,target:"_blank",download:""}},[e._v(e._s(e._f("formatData")(e.updateMyAss.data)))]),s("Upload",{ref:"upload",attrs:{headers:e.headers,"on-success":e.updateUploadSuccess,name:"picture",action:"http://localhost:8080/hrserver/empAssessment/data"}},[s("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[e._v("上传新文件")])],1)],1),s("FormItem",{attrs:{label:"说明:",prop:"remark"}},[s("Input",{attrs:{type:"textarea",placeholder:"请输入考核说明"},model:{value:e.updateMyAss.remark,callback:function(t){e.$set(e.updateMyAss,"remark",t)},expression:"updateMyAss.remark"}})],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"primary"},on:{click:function(t){return e.updateMyAssessment("updateMyAss")}}},[e._v("保存")])],1)],1)],1)},r=[],n=(s("7f7f"),s("c1df")),o=s.n(n),i={data:function(){return{headers:{token:this.$store.state.token,sessionId:this.$store.state.sessionId},file:"",addModal:!1,updateMyAssModal:!1,showMyAssModal:!1,departAssPage:1,departAssTotal:100,departAssLimit:5,departAssPageSize:5,page:1,total:100,limit:10,perEmpList:{},departAssLists:[],showMyAss:{},updateMyAss:{},showMyAssName:"",beginDate:o()().locale("zh-cn").format("YYYY-MM-DD HH:mm:ss"),myAssessmentList:{aid:"",name:"",data:"",remark:""},myAssessmentLists:[],rules:{name:[{required:!0,message:"姓名不能为空",trigger:"blur"}],remark:[{type:"string",max:50,message:"备注长度不能超过50个字符"}]},souAssItem:{state:"",name:""},souFormItem:{result:"",name:""},departAssColumns:[{title:"考核名称",key:"name"},{title:"状态",key:"state"},{title:"创建时间",key:"createDate"},{title:"开始时间",key:"beginDate"},{title:"结束时间",key:"endDate"},{title:"是否提交",slot:"commit"},{title:"备注",key:"remarks"},{title:"操作",slot:"action",width:120,align:"center"}],columns:[{title:"考核名称",key:"name"},{title:"说明",key:"remark"},{title:"考核结果",key:"result"},{title:"是否查阅",key:"check"},{title:"操作",slot:"action",width:280,align:"center"}],data:[{name:"第一季度考核",remark:"没啥好说明的",result:"优秀",check:"是"},{name:"第二季度考核",remark:"没啥好说明的",result:"",check:"否"}]}},methods:{handleUpload:function(e){return this.file=e,!1},onPageSizeChange:function(e){this.limit=e},pageChange:function(e){this.page=e},departAssPageChange:function(e){this.departAssPage=e},getPerEmp:function(){var e=this;this.getRequest("/employee/myfile").then((function(t){e.perEmpList=t.data.data}))},getDepartAss:function(){var e=this;this.getRequest("/empAssessment/myAssessment",{limit:this.departAssLimit,page:this.departAssPage,name:this.souFormItem.name,state:this.souFormItem.state}).then((function(t){e.departAssLists=t.data.data.list,e.departAssTotal=t.data.data.total}))},addAss:function(e){this.addModal=!0,this.myAssessmentList.aid=this.departAssLists[e].id,this.myAssessmentList.name=this.departAssLists[e].name},addMyAss:function(e){var t=this;this.$refs[e].validate((function(s){s&&t.postRequest("/empAssessment/addEmployeeAssessment",{aid:t.myAssessmentList.aid,data:t.myAssessmentList.data,eid:t.$store.state.user.eid,remark:t.myAssessmentList.remark}).then((function(s){0==s.data.error&&200==s.data.code?(t.getDepartAss(),t.$Message.success(s.data.data),t.addModal=!1,t.$refs.upload.clearFiles(),t.$refs[e].resetFields()):t.$Message.error(s.data.message)}))}))},getMyAss:function(e){var t=this;this.getRequest("/empAssessment/myAssessment/"+this.departAssLists[e].id).then((function(e){t.showMyAss=e.data.data})),this.showMyAssModal=!0},beforeMyAss:function(e){var t=this;this.getRequest("/empAssessment/myAssessment/"+this.departAssLists[e].id).then((function(e){console.log(e),t.updateMyAss=e.data.data})),this.updateMyAssModal=!0},updateMyAssessment:function(e){var t=this;this.$refs[e].validate((function(s){s&&t.postRequest("/empAssessment/updateEmployeeAssessment",{id:t.updateMyAss.id,data:t.updateMyAss.data,remark:t.updateMyAss.remark}).then((function(s){0==s.data.error&&200==s.data.code?(t.getDepartAss(),t.$Message.success(s.data.data),t.updateMyAssModal=!1,t.$refs.upload.clearFiles(),t.$refs[e].resetFields()):t.$Message.error(s.data.message)}))}))},cancel:function(){},handleReset:function(e){this.$refs[e].resetFields()},uploadSuccess:function(e,t){this.myAssessmentList.data=e.data,this.$Message.success("文件上传成功")},updateUploadSuccess:function(e,t){this.updateMyAss.data=e.data,this.$Message.success("文件上传成功")}},mounted:function(){this.getPerEmp(),this.getDepartAss()},watch:{departAssPage:"getDepartAss"},filters:{formatData:function(e){var t=function(e,t,s){for(var a=e.indexOf(t),r=0;r<s;r++)a=e.indexOf(t,a+1);return a};if(""!=e&&null!=e){var s=t(e,"/",4),a=e.substring(s+1);return a}return""}}},l=i,m=s("2877"),d=Object(m["a"])(l,a,r,!1,null,null,null);t["default"]=d.exports},f796:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Row",[s("Col",{attrs:{span:"22"}},[s("Row",{attrs:{gutter:6}},[s("Col",{attrs:{span:"3"}},[s("treeselect",{staticClass:"departDown",attrs:{options:e.dropDownList.departmentList,"default-expand-level":1,placeholder:"请选择部门"},model:{value:e.souformItem.departmentId,callback:function(t){e.$set(e.souformItem,"departmentId",t)},expression:"souformItem.departmentId"}})],1),s("Col",{attrs:{span:"2"}},[s("Select",{attrs:{placeholder:"职位",clearable:""},model:{value:e.souformItem.positionId,callback:function(t){e.$set(e.souformItem,"positionId",t)},expression:"souformItem.positionId"}},e._l(e.dropDownList.positionList,(function(t){return s("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1),s("Col",{attrs:{span:"5"}},[s("Input",{attrs:{clearable:"",placeholder:"请输入姓名..."},model:{value:e.souformItem.name,callback:function(t){e.$set(e.souformItem,"name",t)},expression:"souformItem.name"}})],1),s("Col",{attrs:{span:"1"}},[s("Button",{attrs:{icon:"ios-search"},on:{click:e.getEmpSalaryList}},[e._v("搜索")])],1)],1)],1)],1),s("br"),s("Row",[s("Table",{ref:"selection",attrs:{border:"",columns:e.columns,data:e.employeeSalarylist},scopedSlots:e._u([{key:"action",fn:function(t){var a=t.row,r=t.index;return[s("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary"},on:{click:function(t){return e.select(a.eid,a.employee.name,a.employee.workId)}}},[e._v("查看调薪记录\n                ")]),s("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary"},on:{click:function(t){return e.beforeupdate(r)}}},[e._v("调薪")])]}}])})],1),s("Row",{style:{margin:"20px 0 0 0"}},[s("Page",{attrs:{total:e.total,"show-sizer":"","show-elevator":"","show-total":""},on:{"on-change":e.pageChange,"on-page-size-change":e.onPageSizeChange}})],1),s("Modal",{attrs:{title:"调薪",width:"35%"},on:{"on-visible-change":e.cancel},model:{value:e.updateModal,callback:function(t){e.updateModal=t},expression:"updateModal"}},[s("Form",{ref:"salary",attrs:{model:e.salary,"label-width":80,rules:e.newSalaryRules}},[s("Row",[s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"姓名："}},[s("p",[e._v(e._s(e.salary.name))])])],1),s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"工号："}},[s("p",[e._v(e._s(e.salary.workId))])])],1)],1),s("Row",[s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"基础工资：",prop:"baseSalary"}},[s("Input",{attrs:{placeholder:"请输入"},model:{value:e.salary.baseSalary,callback:function(t){e.$set(e.salary,"baseSalary",t)},expression:"salary.baseSalary"}})],1)],1),s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"绩效工资：",prop:"meritSalary"}},[s("Input",{attrs:{placeholder:"请输入"},model:{value:e.salary.meritSalary,callback:function(t){e.$set(e.salary,"meritSalary",t)},expression:"salary.meritSalary"}})],1)],1)],1),s("Row",[s("Col",{attrs:{span:"24"}},[s("FormItem",{attrs:{label:"备注：",prop:"remark"}},[s("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入..."},model:{value:e.salary.remark,callback:function(t){e.$set(e.salary,"remark",t)},expression:"salary.remark"}})],1)],1)],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{on:{click:function(t){return e.handleReset("salary")}}},[e._v("重置")]),s("Button",{attrs:{type:"primary"},on:{click:function(t){return e.updateSalary("salary")}}},[e._v("保存")])],1)],1),s("Modal",{attrs:{title:"调薪记录",width:"60%"},model:{value:e.selectModal,callback:function(t){e.selectModal=t},expression:"selectModal"}},[s("Row",{style:{margin:"0 0 15px 0"}},[s("Col",{attrs:{span:"2"}},[s("p",[e._v("姓名："+e._s(e.name))])]),s("Col",{attrs:{span:"5"}},[s("p",[e._v("工号："+e._s(e.workId))])])],1),s("Row",{style:{marginBottom:"10px"}},[s("Table",{ref:"selection",attrs:{border:"",columns:e.columns2,data:e.employeeSalarylogList}})],1),s("Row",{attrs:{type:"flex",justify:"center"}},[s("Col",[s("Page",{attrs:{total:e.total,"show-sizer":"","show-elevator":"","show-total":""},on:{"on-change":e.onSelectModalPageChange,"on-page-size-change":e.onSelectModalPageSizeChange}})],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{on:{click:function(t){e.selectModal=!1}}},[e._v("返回")])],1)],1)],1)},r=[],n=(s("7f7f"),s("ca17")),o=s.n(n),i=(s("542c"),{components:{Treeselect:o.a},name:"PerMv",data:function(){return{page:1,total:100,limit:10,selectModalPage:1,selectModalTotal:100,selectModalLimit:10,name:"",workId:"",loading:!1,selectModal:!1,updateModal:!1,index:1,dropDownList:[],employeeSalarylist:[],employeeSalarylogList:[],beforSalary:{beforBasics:"",beforMerit:""},salary:{id:0,eid:0,name:"",workId:"",baseSalary:"",meritSalary:"",remark:""},newSalary:{id:0,eid:0,name:"",workId:"",baseSalary:"",meritSalary:"",remark:""},newSalaryRules:{baseSalary:[{required:!0,message:"基础工资不能为空",trigger:"blur"},{validator:this.beforBasics,trigger:"blur"}],meritSalary:[{required:!0,message:"绩效工资不能为空",trigger:"blur"},{validator:this.beforMerit,trigger:"blur"}]},souformItem:{departmentId:null,positionId:null,name:""},formItem:{name:"",gender:"",department:"",date:"",type:"",season:"",grade:"",remark:""},columns:[{title:"姓名",key:"name",render:function(e,t){return e("span",t.row.employee.name)}},{title:"工号",key:"workId",render:function(e,t){return e("span",t.row.employee.workId)}},{title:"部门",key:"departmentName",render:function(e,t){return e("span",t.row.employee.departmentName)}},{title:"基础工资",key:"baseSalary"},{title:"绩效工资",key:"meritSalary"},{title:"操作",slot:"action",width:280,align:"center"}],columns2:[{title:"修改前基础工资",key:"befBaseSalary"},{title:"修改后基础工资",key:"afterBaseSalary"},{title:"修改前绩效工资",key:"befMeritSalary"},{title:"修改后绩效工资",key:"afterMeritSalary"},{title:"修改日期",key:"date"},{title:"备注",key:"remark"}]}},mounted:function(){this.getEmpSalaryList(),this.getDropDownList()},watch:{page:"getEmpSalaryList",limit:"getEmpSalaryList",selectModalPage:"select",selectModalLimit:"select"},methods:{getDropDownList:function(){var e=this;this.getRequest("/employee/init").then((function(t){e.dropDownList=t.data.data}))},onPageSizeChange:function(e){this.limit=e},pageChange:function(e){this.page=e},onSelectModalPageSizeChange:function(e){this.selectModalLimit=e},onSelectModalPageChange:function(e){this.selectModalPage=e},getEmpSalaryList:function(){var e=this;this.loading=!0,this.getRequest("/salary/allEmpSalary",{page:this.page,limit:this.limit,departmentId:this.souformItem.departmentId,positionId:this.souformItem.positionId,name:this.souformItem.name}).then((function(t){console.log(t),e.loading=!1,e.employeeSalarylist=t.data.data.list,e.total=t.data.data.total}))},updateSalary:function(e){var t=this,s=/[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、\s]/im;this.$refs[e].validate((function(e){s.test(t.salary.baseSalary)||s.test(t.salary.meritSalary)?t.$Message.error("工资存在特殊字符"):e&&t.putRequest("/salary/updateEmpSalary",{id:t.salary.id,remark:t.salary.remark,baseSalary:t.salary.baseSalary,meritSalary:t.salary.meritSalary}).then((function(e){0==e.data.error&&200==e.data.code?(t.getEmpSalaryList(),t.newSalary.baseSalary="",t.newSalary.remark="",t.newSalary.meritSalary="",t.$Message.success(e.data.data),t.updateModal=!1):t.$Message.error(e.data.message)}))}))},beforeupdate:function(e){this.updateModal=!0,this.salary.id=this.employeeSalarylist[e].id,this.salary.eid=this.employeeSalarylist[e].eid,this.salary.name=this.employeeSalarylist[e].employee.name,this.salary.workId=this.employeeSalarylist[e].employee.workId,this.salary.baseSalary=""+this.employeeSalarylist[e].baseSalary,this.salary.meritSalary=""+this.employeeSalarylist[e].meritSalary,this.beforSalary.beforBasics=""+this.employeeSalarylist[e].baseSalary},select:function(e,t,s){var a=this;this.selectModal=!0,this.getRequest("/salary/salary_log/"+e,{page:this.selectModalPage,limit:this.selectModalLimit}).then((function(e){console.log(e),a.loading=!1,a.employeeSalarylogList=e.data.data.list,a.name=t,a.workId=s,a.total=e.data.data.total}))},handleReset:function(e){this.$refs[e].resetFields(),this.rpList.name="",this.rpList.workId=""},cancel:function(e){0==e&&(this.$refs["rpList"].resetFields(),this.rpList.name="",this.rpList.workId="")},beforBasics:function(e,t,s){if(t==this.beforSalary.beforBasics)return s(new Error("修改后的基础工资不能和修改前一样"));s()},beforMerit:function(e,t,s){if(t==this.beforSalary.beforMerit)return s(new Error("修改后的绩效工资不能和修改前一样"));s()}}}),l=i,m=s("2877"),d=Object(m["a"])(l,a,r,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-12840419.48590076.js.map